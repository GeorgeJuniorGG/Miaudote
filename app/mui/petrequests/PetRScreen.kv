#:kivy 2.0
#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import Color mui.ColorTheme.Color
#:set cor Color()

<PetRScreen>:
    petName: pet_name
    petSex: pet_sex
    petAge: pet_age
    petAddr: pet_addr
    msgRequest: msg_request

    md_bg_color: get_color_from_hex(cor.azulCinzaClaro()+'11')

    canvas:
        Color:
            rgba: get_color_from_hex(cor.azulClaro())
        Line:
            points: self.x, 0.9 * self.top, self.right, 0.9 * self.top
            width: 10
        Line:
            points: self.x, self.top - 10, self.right, self.top - 10
            width: 10

    MDIconButton:
        icon: "arrow-left"
        user_font_size: "35sp"
        pos_hint:{"center_x": 0.08, "center_y": 0.94}
        theme_text_color: "Custom"
        text_color: get_color_from_hex(cor.azulClaro())
        on_release:
            root.go_backward()

    MDLabel:
        text: "Miaudote"
        font_name: "Spirax-Regular"
        theme_text_color: "Custom"
        text_color: get_color_from_hex(cor.vermelho())
        pos_hint: {"center_y": 0.94}
        halign: "center"
        font_size: "25sp"

    MDFloatLayout:
        id: pet_bar
        orientation: "vertical"
            
        MDLabel:
            id: pet_name
            text: str(root.petName)
            font_size: "20sp"
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.vermelho())
            halign: "center"
            pos_hint: {"center_y": 0.85}

    MDCarousel:
        id: carousel
        size_hint: 1, 0.25
        direction: "right"
        pos_hint: {"center_x": 0.5, "center_y": 0.68}
            
        FitImage:
            source: "sorriso.png"
            
        FitImage:
            source: "mrbubbles.png"
        
    MDFloatLayout:
        size_hint: 1, 0.53

        MDLabel:
            text: "Resumo sobre " + str(root.petName)
            font_size: "20sp"
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.vermelho())
            halign: "center"
            pos_hint: {"center_y": 1}

        MDLabel:
            text: "Sexo: "
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.vermelho())
            halign: "left"
            pos_hint: {"center_x": 0.6, "center_y": 0.9}
        
        MDLabel:
            id: pet_sex
            text: str(root.petSex)
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.azulEscuro())
            halign: "left"
            pos_hint: {"center_x": 0.85, "center_y": 0.9}

        MDLabel:
            text: "Idade: "
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.vermelho())
            halign: "left"
            pos_hint: {"center_x": 0.6, "center_y": 0.85}
        
        MDLabel:
            id: pet_age
            text: str(root.petAge)
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.azulEscuro())
            halign: "left"
            pos_hint: {"center_x": 0.85, "center_y": 0.85}

        MDLabel:
            text: "Localização: "
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.vermelho())
            halign: "left"
            pos_hint: {"center_x": 0.6, "center_y": 0.8}

        MDLabel:
            id: pet_addr
            text: str(root.petAddr)
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.azulEscuro())
            halign: "left"
            pos_hint: {"center_x": 0.85, "center_y": 0.8}
    
    MDFloatLayout:
        size_hint: 1, 0.39

        canvas.before:
            Color:
                rgba: get_color_from_hex(cor.vermelho())
            Line:
                points: self.x + 20, self.top, self.right - 20, self.top - 0.1
                width: 1.015

        MDLabel:
            text: "Status da Solicitação"
            font_size: "20sp"
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.vermelho())
            halign: "center"
            pos_hint: {"center_y": 0.9}

        MDLabel:
            id: msg_request
            text: str(root.msgRequest)
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.azulEscuro())
            halign: "justify"
            pos_hint: {"center_y": 0.73}
            padding_x: 20
        
        MDFillRoundFlatButton:
            text: "Abrir o Chat"
            font_size: "20sp"
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.branco())
            md_bg_color: get_color_from_hex(cor.azulClaro())
            size_hint: 0.6, 0.15
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            on_press:
                root.open_chat()

        MDFillRoundFlatButton:
            text: "Cancelar a Solicitação"
            font_size: "20sp"
            theme_text_color: "Custom"
            text_color: get_color_from_hex(cor.branco())
            md_bg_color: get_color_from_hex(cor.vermelho())
            size_hint: 0.6, 0.15
            pos_hint: {"center_x": 0.5, "center_y": 0.3}
            on_press:
                root.cancel_request()